{
  "name": "turtle_sim",
  "image": "turtle_sim:latest",

  "remoteUser": "ros",
  "workspaceFolder": "/workspaces/${localWorkspaceFolderBasename}",
  "workspaceMount": "source=${localWorkspaceFolder},target=/workspaces/${localWorkspaceFolderBasename},type=bind,consistency=cached",

  "runArgs": [
    "--network=host",
    "--ipc=host",
    "--gpus=all",
    "--privileged",
    "--device=/dev/dri",
    "--device=/dev/dri/renderD128",
    "--device=/dev/dri/card0",
    "--device=/dev/dri/card1",
    "--group-add=video",
    "--env", "DISPLAY=${localEnv:DISPLAY}",
    "--env", "QT_X11_NO_MITSHM=1",
    "--volume", "/tmp/.X11-unix:/tmp/.X11-unix:rw",
    "--device=/dev/dri:/dev/dri",
    "--cap-add=SYS_PTRACE",
    "--security-opt=seccomp=unconfined",
    "--volume=/home/karol/.gz:/home/karol/.gz"
  ],

  "containerEnv": {
    "IGN_GAZEBO_RESOURCE_PATH": "/opt/ros/humble/share:/workspaces/turtle_sim/install:/workspaces/turtle_sim/turtlebot_sim/turtlebot4_ignition_bringup/models",
    "GZ_SIM_RESOURCE_PATH": "/opt/ros/humble/share:/workspaces/turtle_sim/install:/workspaces/turtle_sim/turtlebot_sim/turtlebot4_ignition_bringup/models",
    "ROS_DOMAIN_ID": "0",
    "NVIDIA_VISIBLE_DEVICES": "all",
    "NVIDIA_DRIVER_CAPABILITIES": "all",
    "LANG": "en_US.UTF-8",
    "LC_ALL": "en_US.UTF-8"
  },

  "postCreateCommand": "/bin/bash .devcontainer/postCreateCommand.sh",

  "customizations": {
    "vscode": {
      "extensions": [
        "ms-iot.vscode-ros",
        "ms-vscode.cpptools",
        "ms-python.python"
      ],
      "settings": {
        "terminal.integrated.defaultProfile.linux": "bash"
      }
    }
  }
}
